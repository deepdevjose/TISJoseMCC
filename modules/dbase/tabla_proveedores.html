<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Base de Datos • Proveedores | SGTL</title>
  <link rel="stylesheet" href="../../assets/css/styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body class="module-page">
  <!-- Header with navigation -->
  <header class="module-header">
    <div class="container">
      <nav class="module-nav">
        <a href="../proveedores.html" class="back-link">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"
            style="margin-right: 0.5rem; vertical-align: middle;">
            <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.42-1.41L7.83 13H20v-2z" />
          </svg>
          Volver a Proveedores
        </a>
        <div class="module-status">
          <span class="status-badge active">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="#28A745">
              <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" />
            </svg>
            Base de Datos
          </span>
        </div>
      </nav>
    </div>
  </header>

  <!-- Main content -->
  <div class="container">
    <!-- Hero Section -->
    <section class="module-hero">
      <div class="hero-content">
        <div class="hero-text">
          <h1 class="module-title">Base de Datos • Proveedores</h1>
          <p class="module-description">Diseño y estructura de la base de datos del subsistema de proveedores</p>
          <div class="hero-stats">
            <div class="stat-item">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <ellipse cx="12" cy="5" rx="9" ry="3" />
                <path d="m3 5 0 14c0 1.7 4 3 9 3s9-1.3 9-3V5" />
                <path d="m3 12c0 1.7 4 3 9 3s9-1.3 9-3" />
              </svg>
              <span>2 Tablas</span>
            </div>
            <div class="stat-item">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2" />
                <rect x="8" y="2" width="8" height="4" rx="1" ry="1" />
              </svg>
              <span>Relación N:M</span>
            </div>
            <div class="stat-item">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z" />
                <circle cx="12" cy="10" r="3" />
              </svg>
              <span>3 Tipos Entrega</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Main Content -->
    <main class="module-content">
      <!-- Database Design Section -->
      <section class="content-section">
        <div class="section-header">
          <svg class="section-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
            stroke-width="2">
            <ellipse cx="12" cy="5" rx="9" ry="3" />
            <path d="m3 5 0 14c0 1.7 4 3 9 3s9-1.3 9-3V5" />
            <path d="m3 12c0 1.7 4 3 9 3s9-1.3 9-3" />
          </svg>
          <h2>Diagrama de la Base de Datos</h2>
        </div>
        <div class="diagram-container">
          <img src="../../assets/img/tabla_proveedores.png" alt="Diagrama de la tabla en la base de datos — Proveedores"
            class="database-diagram">
        </div>
      </section>

      <!-- Architecture Description Section -->
      <section class="content-section">
        <div class="section-header">
          <svg class="section-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
            stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
            <polyline points="14,2 14,8 20,8" />
            <line x1="16" y1="13" x2="8" y2="13" />
            <line x1="16" y1="17" x2="8" y2="17" />
            <polyline points="10,9 9,9 8,9" />
          </svg>
          <h2>Arquitectura de la Base de Datos</h2>
          <p>El módulo se compone de tablas principales, tablas de subtipo y catálogos de apoyo para garantizar la
            normalización y flexibilidad.</p>
        </div>

        <div class="table-info-card">
          <div class="table-header">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2" />
              <rect x="8" y="2" width="8" height="4" rx="1" ry="1" />
            </svg>
            <h3>Tabla Proveedor (Tabla Base)</h3>
          </div>
          <div class="table-purpose">
            <h4>Propósito</h4>
            <p>Almacenar la información común y compartida para todos los proveedores, como RFC, contacto y dirección.
              Actúa como la tabla padre para los distintos tipos de proveedor.</p>
          </div>
          <div class="table-fields">
            <h4>Campos Clave</h4>
            <div class="fields-grid">
              <div class="field-item"><strong>Id_proveedor:</strong> PK única para cada proveedor.</div>
              <div class="field-item"><strong>Id_tipo_proveedor:</strong> FK que indica si es 'Persona Física' o
                'Empresa'.</div>
              <div class="field-item"><strong>RFC:</strong> Identificador fiscal único y opcional.</div>
            </div>
          </div>
        </div>

        <div class="support-tables-grid">
          <div class="table-info-card small">
            <div class="table-header">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" />
                <circle cx="12" cy="7" r="4" />
              </svg>
              <h3>Tabla ProveedorPersonaFisica</h3>
            </div>
            <div class="table-purpose">
              <p><strong>(Subtipo)</strong> Almacena datos exclusivos de proveedores que son personas físicas.</p>
            </div>
            <div class="table-fields">
              <h4>Campos</h4>
              <div class="fields-grid small-grid">
                <div class="field-item"><strong>Id_proveedor:</strong> PK y FK que la conecta a la tabla `Proveedor`.
                </div>
                <div class="field-item"><strong>primer_nombre, ap_paterno:</strong> Nombre completo.</div>
              </div>
            </div>
          </div>
          <div class="table-info-card small">
            <div class="table-header">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2z" />
              </svg>
              <h3>Tabla ProveedorPersonaMoral</h3>
            </div>
            <div class="table-purpose">
              <p><strong>(Subtipo)</strong> Almacena datos exclusivos de proveedores que son empresas.</p>
            </div>
            <div class="table-fields">
              <h4>Campos</h4>
              <div class="fields-grid small-grid">
                <div class="field-item"><strong>Id_proveedor:</strong> PK y FK que la conecta a la tabla `Proveedor`.
                </div>
                <div class="field-item"><strong>razon_social:</strong> Nombre legal de la empresa.</div>
              </div>
            </div>
          </div>
        </div>

        <div class="table-info-card">
          <div class="table-header">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.72" />
              <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.72-1.72" />
            </svg>
            <h3>Tabla ProveedorItem (Tabla de Unión)</h3>
          </div>
          <div class="table-purpose">
            <h4>Propósito</h4>
            <p>Gestionar la relación muchos-a-muchos (N:M) entre proveedores e ítems. Define qué producto ofrece cada
              proveedor y bajo qué condiciones comerciales.</p>
          </div>
          <div class="table-fields">
            <h4>Campos</h4>
            <div class="fields-grid">
              <div class="field-item">
                <strong>Id_proveedor:</strong> Clave foránea (FK) que conecta con la tabla `Proveedor`.
              </div>
              <div class="field-item">
                <strong>Id_item:</strong> Clave foránea (FK) que conecta con la tabla `CatalogoItem`.
              </div>
              <div class="field-item">
                <strong>precio_unitario:</strong> Precio de compra específico que ofrece este proveedor por este ítem.
              </div>
              <div class="field-item">
                <strong>Id_tipo_entrega:</strong> FK que indica el método de entrega (ej. 'Local', 'Mensajería').
              </div>
              <div class="field-item">
                <strong>tiempo_entrega_dias:</strong> Días estimados que tarda el proveedor en surtir el ítem.
              </div>
              <div class="field-item">
                <strong>notas:</strong> Observaciones adicionales sobre la compra (ej. 'Compra mínima 5 pzs').
              </div>
            </div>
          </div>
        </div>

        <div class="section-subheader">
          <h4>Catálogos de Apoyo y Tablas Geográficas</h4>
          <p>Estas tablas normalizan la información, evitan la redundancia y aseguran la consistencia de los datos en
            todo el módulo.</p>
        </div>

        <div class="support-tables-grid">
          <div class="table-info-card small">
            <div class="table-header">
              <h3>Tabla ProveedorTipo</h3>
            </div>
            <div class="table-purpose">
              <p>Clasifica a los proveedores para distinguir entre 'Persona Física' y 'Empresa'.</p>
            </div>
            <div class="table-fields">
              <h4>Campos</h4>
              <div class="fields-grid small-grid">
                <div class="field-item"><strong>Id_tipo_proveedor:</strong> PK</div>
                <div class="field-item"><strong>nombre:</strong> Descripción del tipo.</div>
              </div>
            </div>
          </div>

          <div class="table-info-card small">
            <div class="table-header">
              <h3>Tabla EntregaTipo</h3>
            </div>
            <div class="table-purpose">
              <p>Estandariza los métodos de entrega disponibles (ej. 'Local', 'Mensajería').</p>
            </div>
            <div class="table-fields">
              <h4>Campos</h4>
              <div class="fields-grid small-grid">
                <div class="field-item"><strong>Id_tipo_entrega:</strong> PK</div>
                <div class="field-item"><strong>nombre:</strong> Descripción del tipo.</div>
              </div>
            </div>
          </div>
        </div>

        <div class="support-tables-grid">
          <div class="table-info-card small">
            <div class="table-header">
              <h3>Tabla Pais</h3>
            </div>
            <div class="table-purpose">
              <p>Catálogo para almacenar los países.</p>
            </div>
            <div class="table-fields">
              <h4>Campos</h4>
              <div class="fields-grid small-grid">
                <div class="field-item"><strong>Id_pais:</strong> PK</div>
                <div class="field-item"><strong>nombre:</strong> Nombre del país.</div>
              </div>
            </div>
          </div>

          <div class="table-info-card small">
            <div class="table-header">
              <h3>Tabla Estado</h3>
            </div>
            <div class="table-purpose">
              <p>Catálogo para los estados, vinculados a un país.</p>
            </div>
            <div class="table-fields">
              <h4>Campos</h4>
              <div class="fields-grid small-grid">
                <div class="field-item"><strong>Id_estado:</strong> PK</div>
                <div class="field-item"><strong>Id_pais:</strong> FK a la tabla `Pais`.</div>
              </div>
            </div>
          </div>

          <div class="table-info-card small">
            <div class="table-header">
              <h3>Tabla Municipio</h3>
            </div>
            <div class="table-purpose">
              <p>Catálogo para los municipios, vinculados a un estado.</p>
            </div>
            <div class="table-fields">
              <h4>Campos</h4>
              <div class="fields-grid small-grid">
                <div class="field-item"><strong>Id_municipio:</strong> PK</div>
                <div class="field-item"><strong>Id_estado:</strong> FK a la tabla `Estado`.</div>
              </div>
            </div>
          </div>
        </div>

        <div class="normalization-section">
          <h3>Normalización de la Base de Datos</h3>
          <div class="normalization-grid">
            <div class="norm-card">
              <h4>1NF</h4>
              <p>Todos los atributos son atómicos y cada registro es único.</p>
            </div>
            <div class="norm-card">
              <h4>2NF</h4>
              <p>Se cumple al no tener dependencias parciales en tablas con claves compuestas como `ProveedorItem`.</p>
            </div>
            <div class="norm-card">
              <h4>3NF</h4>
              <p>Se eliminan dependencias transitivas al separar los datos de personas y empresas, y al usar catálogos
                (`ProveedorTipo`, `EntregaTipo`) para evitar redundancia.</p>
            </div>
          </div>
        </div>
      </section>

      <section class="content-section">
        <div class="section-header">
          <svg class="section-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
            stroke-width="2">
            <polyline points="16 18 22 12 16 6" />
            <polyline points="8 6 2 12 8 18" />
          </svg>
          <h2>Código SQL para Crear Tablas</h2>
        </div>
        <div class="code-container">
          <div class="code-header">
            <span class="code-language">SQL</span>
            <span class="code-title">Creación de tablas del módulo Proveedores</span>
          </div>
          <pre><code>-- Tablas de catálogo
CREATE TABLE dbo.ProveedorTipo (
    Id_tipo_proveedor TINYINT IDENTITY(1,1) PRIMARY KEY,
    nombre            NVARCHAR(50) NOT NULL UNIQUE
);
CREATE TABLE dbo.EntregaTipo (
    Id_tipo_entrega TINYINT IDENTITY(1,1) PRIMARY KEY,
    nombre          NVARCHAR(50) NOT NULL UNIQUE
);
GO
-- Tabla base
CREATE TABLE dbo.Proveedor (
    Id_proveedor        INT IDENTITY(1,1) PRIMARY KEY,
    Id_tipo_proveedor   TINYINT NOT NULL REFERENCES dbo.ProveedorTipo(Id_tipo_proveedor),
    RFC                 VARCHAR(13) NULL UNIQUE,
    telefono            VARCHAR(25) NULL,
    Id_municipio        INT NULL -- FK a tabla geográfica
);
GO
-- Tablas de subtipo
CREATE TABLE dbo.ProveedorPersonaFisica (
    Id_proveedor    INT PRIMARY KEY REFERENCES dbo.Proveedor(Id_proveedor) ON DELETE CASCADE,
    primer_nombre   NVARCHAR(60) NOT NULL,
    ap_paterno      NVARCHAR(60) NOT NULL
);
CREATE TABLE dbo.ProveedorPersonaMoral (
    Id_proveedor    INT PRIMARY KEY REFERENCES dbo.Proveedor(Id_proveedor) ON DELETE CASCADE,
    razon_social    NVARCHAR(200) NOT NULL
);
GO
-- Tabla de unión
CREATE TABLE dbo.ProveedorItem (
    Id_proveedor        INT NOT NULL REFERENCES dbo.Proveedor(Id_proveedor),
    Id_item             VARCHAR(20) NOT NULL REFERENCES dbo.CatalogoItem(Id_item),
    precio_unitario     DECIMAL(12,2) NOT NULL,
    Id_tipo_entrega     TINYINT NOT NULL REFERENCES dbo.EntregaTipo(Id_tipo_entrega),
    tiempo_entrega_dias INT NULL,
    PRIMARY KEY (Id_proveedor, Id_item)
);
GO</code></pre>
        </div>
      </section>
    </main>
</body>

</html>