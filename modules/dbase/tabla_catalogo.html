<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Base de Datos • Catálogo | SGTL</title>
  <link rel="stylesheet" href="../../assets/css/styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body class="module-page">
  <!-- Header with navigation -->
  <header class="module-header">
    <div class="container">
      <nav class="module-nav">
        <a href="../catalogo.html" class="back-link">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"
            style="margin-right: 0.5rem; vertical-align: middle;">
            <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.42-1.41L7.83 13H20v-2z" />
          </svg>
          Volver a Catálogo
        </a>
        <div class="module-status">
          <span class="status-badge active">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="#28A745">
              <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" />
            </svg>
            Base de Datos
          </span>
        </div>
      </nav>
    </div>
  </header>

  <!-- Main content -->
  <div class="container">
    <!-- Hero Section -->
    <section class="module-hero">
      <div class="hero-content">
        <div class="hero-text">
          <h1 class="module-title">Base de Datos • Catálogo</h1>
          <p class="module-description">Diseño y estructura de la base de datos del subsistema de catálogo.</p>
          <div class="hero-stats">
            <div class="stat-item">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <ellipse cx="12" cy="5" rx="9" ry="3" />
                <path d="m3 5 0 14c0 1.7 4 3 9 3s9-1.3 9-3V5" />
                <path d="m3 12c0 1.7 4 3 9 3s9-1.3 9-3" />
              </svg>
              <span><strong>2 Tablas</strong> (Principal y de Apoyo)</span>
            </div>
            <div class="stat-item">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M18 8c0 4.4-3.6 8-8 8s-8-3.6-8-8 3.6-8 8-8 8 3.6 8 8Z" />
                <path d="M18 16c0 4.4-3.6 8-8 8s-8-3.6-8-8 3.6-8 8-8 8 3.6 8 8Z" opacity=".5" />
              </svg>
              <span><strong>Relación 1 a N</strong> (Uno a Muchos)</span>
            </div>
            <div class="stat-item">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path
                  d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
              </svg>
              <span><strong>Normalizada (3NF)</strong></span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Main Content -->
    <main class="module-content">
      <!-- Database Design Section -->
      <section class="content-section">
        <div class="section-header">
          <svg class="section-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
            stroke-width="2">
            <ellipse cx="12" cy="5" rx="9" ry="3" />
            <path d="m3 5 0 14c0 1.7 4 3 9 3s9-1.3 9-3V5" />
            <path d="m3 12c0 1.7 4 3 9 3s9-1.3 9-3" />
          </svg>
          <h2>Diagrama de la Base de Datos</h2>
        </div>
        <div class="diagram-container">
          <img src="../../assets/img/BD.png" alt="Diagrama de la tabla en la base de datos — Catálogo"
            class="database-diagram">
        </div>
      </section>

      <!-- Architecture Description Section -->
      <section class="content-section">
        <main class="container">
    <section class="content-section">
      <div class="section-header">
        <svg class="section-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6" />
        </svg>
        <h2>Arquitectura de la Base de Datos</h2>
      </div>

      <div class="table-info-card">
        <div class="table-header">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="4" width="18" height="16" rx="2" />
            <path d="M7 8h10M7 12h10M7 16h10" />
          </svg>
          <h3>Tabla CatalogoItem</h3>
        </div>
        <div class="table-purpose">
          <h4>Propósito</h4>
          <p>Almacenar el registro de cada servicio o refacción individual que ofrece el taller, vinculando cada ítem a un tipo estandarizado para asegurar la consistencia.</p>
        </div>
        <div class="table-fields">
          <h4>Campos</h4>
          <div class="fields-grid">
            <div class="field-item">
              <strong>Id_item:</strong> Clave primaria (PK) y SKU único del producto (ej. SRV-MANT-0001).
            </div>
            <div class="field-item">
              <strong>nombre_item:</strong> Nombre comercial del servicio o refacción.
            </div>
            <div class="field-item">
              <strong>Id_tipo:</strong> Clave foránea (FK) que se conecta con la tabla `CatalogoTipo`.
            </div>
            <div class="field-item">
              <strong>precio_item_unidad:</strong> Precio de venta al público (MXN).
            </div>
            <div class="field-item">
              <strong>descripcion:</strong> Detalles adicionales del servicio o refacción.
            </div>
          </div>
        </div>
      </div>

      <div class="table-info-card">
        <div class="table-header">
           <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2" />
              <rect x="8" y="2" width="8" height="4" rx="1" ry="1" />
            </svg>
          <h3>Tabla CatalogoTipo</h3>
        </div>
        <div class="table-purpose">
          <h4>Propósito</h4>
          <p>Actuar como una tabla de catálogo (lookup table) para estandarizar y centralizar los tipos de ítems disponibles (ej. "Servicio", "Refacción"), evitando la redundancia y errores de captura.</p>
        </div>
        <div class="table-fields">
          <h4>Campos</h4>
          <div class="fields-grid">
            <div class="field-item">
              <strong>Id_tipo:</strong> Clave primaria (PK) autoincremental para el tipo de ítem.
            </div>
            <div class="field-item">
              <strong>nombre:</strong> Descripción única del tipo de ítem.
            </div>
          </div>
        </div>
      </div>

      <div class="normalization-section">
        <h3>
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
          </svg>
          Normalización de la Base de Datos
        </h3>
        <div class="normalization-grid">
          <div class="norm-card">
            <h4>1NF</h4>
            <p>Cada ítem es una fila única con atributos atómicos, sin campos multivaluados.</p>
          </div>
          <div class="norm-card">
            <h4>2NF</h4>
            <p>Todos los atributos dependen de la clave primaria `Id_item`; no existe PK compuesta.</p>
          </div>
          <div class="norm-card">
            <h4>3NF</h4>
            <p>Al separar los tipos de ítem en `CatalogoTipo`, se elimina la redundancia de datos y se previenen anomalías de actualización, cumpliendo con 3NF.</p>
          </div>
        </div>
      </div>
    </section>

    <section class="content-section">
      <div class="section-header">
        <svg class="section-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="16 18 22 12 16 6" />
          <polyline points="8 6 2 12 8 18" />
        </svg>
        <h2>Código SQL para Crear Tablas</h2>
      </div>
      <div class="code-container">
        <div class="code-header">
          <span class="code-language">SQL</span>
          <span class="code-title">Creación de tablas CatalogoTipo y CatalogoItem</span>
        </div>
        <pre><code>-- Tabla para estandarizar los tipos de ítem
CREATE TABLE dbo.CatalogoTipo (
    Id_tipo         TINYINT IDENTITY(1,1) PRIMARY KEY,
    nombre          NVARCHAR(50) NOT NULL UNIQUE
);
GO

-- Tabla principal de ítems del catálogo
CREATE TABLE dbo.CatalogoItem (
    Id_item             VARCHAR(20)   PRIMARY KEY,
    nombre_item         NVARCHAR(120) NOT NULL,
    Id_tipo             TINYINT       NOT NULL,
    precio_item_unidad  DECIMAL(12,2) NOT NULL,
    descripcion         NVARCHAR(500) NULL,
    CONSTRAINT FK_CatalogoItem_Tipo FOREIGN KEY (Id_tipo) REFERENCES dbo.CatalogoTipo(Id_tipo),
    CONSTRAINT CHK_CatalogoItem_precio CHECK (precio_item_unidad >= 0)
);
GO</code></pre>
      </div>
    </section>

    <section class="content-section">
      <div class="section-header">
        <svg class="section-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6" />
        </svg>
        <h2>Datos de Ejemplo</h2>
      </div>
      <div class="code-container">
        <div class="code-header">
          <span class="code-language">SQL</span>
          <span class="code-title">Inserción de registros de ejemplo</span>
        </div>
        <pre><code>-- Primero, poblar la tabla de tipos
INSERT INTO dbo.CatalogoTipo (nombre) VALUES
('Servicio'),
('Refacción');
GO

-- Luego, insertar los ítems referenciando los IDs de los tipos
INSERT INTO dbo.CatalogoItem (Id_item, nombre_item, Id_tipo, precio_item_unidad, descripcion) VALUES
('SRV-MANT-0001','Mantenimiento preventivo', 1, 450.00, 'Limpieza, pasta térmica, pruebas básicas'),
('SRV-SOFT-0001','Formateo e instalación de SO', 1, 600.00, 'Instalación de Windows 11 + drivers'),
('REF-SSD-0001','SSD 1TB NVMe', 2, 1850.00, 'PCIe 4.0, lectura hasta 7,000 MB/s'),
('REF-RAM-0001','RAM 16GB DDR5', 2, 920.00, 'SO-DIMM 5600 MT/s');
GO</code></pre>
      </div>
    </section>
</main>
          
  </div>
</body>

</html>